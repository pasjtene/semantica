{% extends 'AdminBundle::layout.html.twig' %}
{% block meta %}
    <meta name = "{% trans from 'refer' %} home.title {% endtrans %}" >
    <meta name = "keywords" content = "{% trans from 'refer' %} home.description {% endtrans %}" >
{% endblock %}
{% block title %}
    Semantica Technologies Corporation - STC
{% endblock %}


{% block mycss %}
    <link rel="stylesheet" href="{{ asset('components/cssbase/datatablehelp.css') }}">
    <link rel="stylesheet" href="{{ asset('components/cssbase/datatablehelp2.css') }}">
    <style>

        strong{
            font-weight: bold;
        }
        footer{
            bottom: 0;
            width: 100% !important;
        }
        .mega-menu{
            z-index: 9999999999999999999999999999 !important;
        }
        #navadmin{
            padding-top: 1.5%;
        }
        #zone_table{
            height: 352px;
            overflow-y: auto;
        }
        .tabs{
           background-color: #0083c0;
        }
        .tabs a{
           color: white !important;
        }
    </style>
{% endblock %}

{% block main %}
    {{ parent() }}
    <div class="row" id="admin_account">
        <div class="row">
            <div class="col s12">
                <br><br><br>
                <div class="row">
                    <div class="col s12">
                        <br>
                        <div class="col s12">
                            <a class="waves-effect waves-green btn-flat red white-text right-align right" href="{{ path('admin_homepage') }}">{% trans from 'private' %} project.back {% endtrans %}</a>
                        </div>
                    </div>

                    <div class="col s12">
                        <br>
                        <ul class="tabs">
                            <li class="tab col s3"><a href="#detail" class="active">{% trans from 'private' %} project.tab1 {% endtrans %}</a></li>
                            <li class="tab col s3"><a  href="#participator" class="">{% trans from 'private' %} project.tab2 {% endtrans %}</a></li>
                            <li class="tab col s3"><a href="#commit" class="">{% trans from 'private' %} project.tab3 {% endtrans %}</a></li>
                            <li class="tab col s3"><a href="#planning" class="">{% trans from 'private' %} project.tab4 {% endtrans %}</a></li>
                        </ul>
                    </div>
                    <div id="detail" class="col s12">
                        {{ render(controller('AdminBundle:Project:information',{'id':id})) }}
                    </div>
                    <div id="participator" class="col s12">
                        {{ render(controller('AdminBundle:Project:participator',{'id':id})) }}
                    </div>
                    <div id="commit" class="col s12">
                        {{ render(controller('AdminBundle:Project:commit',{'id':id})) }}
                    </div>
                    <div id="planning" class="col s12">
                        {{ render(controller('AdminBundle:Project:planning',{'id':id})) }}
                    </div>
                </div>

            </div>
        </div>
    </div>

{% endblock %}

{% block myjs %}
    <script>
        var id = {{ id }};

        $(document).ready(function()
        {
            var hid = 0;

            var elt= {
                select: $('select'),
                modal: '.modal',
                delete: $('.delete_projet'),
                btnNewTask : '.btn-new-task',
                planningId: $('#planning-id'),
                modalTask: $('#md-new-task'),
                editParticipator: '.edit-participator',
                btnNewParticipator: $("#btn-new-participator"),
                datepicker: '.datepicker'
            };

            elt.select.material_select();

            $(elt.modal).modal();

            elt.delete.click(function(e)
            {
                if(!confirm($('#'+$(this).data('id')).text().trim()))
                {
                    e.preventDefault();
                }
            });

            $(elt.datepicker).pickadate();

            elt.btnNewParticipator.click(function(){
                $("#input-action").val("0");
            });

            $(elt.editParticipator).click(function(e)
            {
                var url = $(this).data('id');
                $('select[selected=selected]').removeAttr('selected');
                $.get(url, function(response){
                    console.log(response);
                });

                e.preventDefault();
            });

            $(elt.btnNewTask).click(function(e)
            {
                var pid = parseInt($(this).data('pid'));
                elt.planningId.val(pid);
                elt.modalTask.modal('open');
                e.preventDefault();
            })
        });
    </script>
{% endblock %}
